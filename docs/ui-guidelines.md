# UI デザインガイドライン

このドキュメントは、Ghost Launcher の UI 実装を継続的に改善するための最低基準を定義します。

## 1. 対象範囲

- 対象: `src/` 配下の React + Fluent UI 実装
- 主な画面: メイン一覧、検索、設定ダイアログ
- 目的: 見た目の一貫性、操作性、アクセシビリティ、保守性の担保

## 2. デザイン原則

- 一貫性: Fluent UI のコンポーネントと `tokens` を優先し、独自スタイルを最小化する
- 可読性: 情報の優先順位を明確にし、1 画面で迷わない構造にする
- 即時性: 読み込み中、失敗、空状態を必ず表示する
- 低負荷: 大量データでも引っかからない操作感を維持する
- 日本語最適化: UI 文言は簡潔で、曖昧な外来語を避ける

## 3. レイアウト指針

- ページ全体は「ヘッダー」「検索」「一覧」「設定ダイアログ」の 4 ブロックを維持する
- コンテナ幅は最大幅を固定し、左右余白で読みやすさを確保する
- 各セクション間の余白は 8px 単位で統一する
- モバイル幅では 2 カラム構成を 1 カラムへ崩す

## 4. スタイル実装ルール

- 原則として `makeStyles` と Fluent `tokens` を使う
- 直書きカラー値は背景演出など必要最小限に限定する
- 角丸、影、境界線は既存 UI に合わせて統一する
- 新規コンポーネントで独自フォントは追加しない

## 5. コンポーネント運用ルール

- 入力要素には必ずラベルまたは同等のアクセシブルネームを与える
- 破壊的操作（削除など）は誤操作対策を入れる
- ダイアログは「目的」「主要操作」「閉じる手段」を明示する
- エラー表示はユーザーが次に取る行動を判断できる文面にする

## 6. 状態設計の必須要件

以下の状態を必ず分離して扱うこと。

- `loading`: ローディング表示
- `error`: 失敗理由の表示
- `empty`: 対象データなしの表示
- `ready`: 通常表示

状態分岐は UI コンポーネント側で明確にし、曖昧な兼用表示を避ける。

## 7. アクセシビリティ要件

- キーボード操作のみで主要フロー（検索、起動、設定変更）を完了できる
- フォーカスが視認できることを CSS で妨げない
- 色だけで状態を伝えない（文言やアイコンを併用）
- エラー通知には `role="alert"` など適切な属性を使う

## 8. パフォーマンス要件

- 検索入力は再描画負荷を抑える（例: `useDeferredValue`）
- 大量リストは描画件数を制御する（仮想化または同等の最適化）
- 重い処理はレンダリング外へ分離する（フック化）

## 9. 文言ガイド（日本語 UI）

- ボタン文言は動詞で終える（例: `選択`, `追加`, `削除`, `起動`）
- プレースホルダーは補助情報であり、ラベルの代替にしない
- エラー文言には原因と対処のいずれかを含める
- 用語は統一する（`ゴースト`, `フォルダ`, `設定`）

## 10. PR レビューチェックリスト

- Fluent UI コンポーネントと `tokens` を優先している
- `loading` / `error` / `empty` / `ready` の状態表示がある
- キーボード操作とフォーカス可視性を損ねていない
- 文字切れやレイアウト崩れが狭幅でも発生しない
- 追加した文言が既存用語と整合している
- 一覧・検索の体感速度が悪化していない

## 11. 今後の推奨改善

- CI のチェック項目を増やし、静的チェックだけでなく UI テストも導入する

## 12. 自動チェック

- ローカル実行: `npm run check:ui-guidelines`
- CI 実行: `.github/workflows/ci-build.yml` 内で同コマンドを実行

## 13. 手動回帰チェック（仮想リスト）

- 前提: 80件以上のゴーストが表示できる状態にする
- ケース1: 一覧を下までスクロールして `再読込` を実行し、先頭から正常表示されること
- ケース2: 一覧を下までスクロールして検索語を入力し、空白表示や表示不一致が出ないこと
- ケース3: 検索語を消した直後も、表示とスクロール位置の不整合がないこと
- 期待結果: `ghosts` 更新後、表示内容とスクロール位置が同期し、ユーザー操作なしで正常表示されること
