# UI デザインガイドライン

このドキュメントは、Ghost Launcher の UI 実装を Windows 11 (WinUI 3 / Fluent 2) 基準で継続的に改善するための最低基準を定義します。

## 1. 対象範囲

- 対象: `src/` 配下の React + Fluent UI 実装
- 主な画面: メイン一覧、検索、設定ダイアログ
- 目的: Windows らしい一貫性、操作性、アクセシビリティ、保守性の担保

## 2. 準拠基準

- デザイン基準は Windows 11 の WinUI 3 / Fluent 2 を優先する
- 視覚表現は「情報優先・控えめな装飾・明確な階層」を原則とする
- OS のライト/ダークテーマ追従を前提とし、独自テーマ分岐を増やしすぎない

## 3. デザイン原則

- 一貫性: Fluent UI コンポーネントと `tokens` を優先し、独自スタイルを最小化する
- 可読性: 主情報と副情報の階層を明確にし、1 画面で迷わない構造にする
- 即時性: 読み込み中、失敗、空状態を必ず表示する
- 低負荷: 大量データでも引っかからない操作感を維持する
- 日本語最適化: UI 文言は簡潔で、曖昧な外来語を避ける

## 4. レイアウト基準

- ページ全体は「ヘッダー」「検索」「一覧」「設定ダイアログ」の 4 ブロックを維持する
- レイアウト余白は 8px グリッド基準で統一する
- コンテナ幅は最大幅を固定し、左右余白で読みやすさを確保する
- モバイル幅では 2 カラム構成を 1 カラムへ崩す
- 主要操作ボタン（再読込、設定、起動）は同一密度で整列する

## 5. スタイル実装ルール

- 原則として `makeStyles` と Fluent `tokens` を使う
- 直書きカラー値は背景面など必要最小限に限定する
- 角丸、境界線、影は Windows 11 の落ち着いた階層表現に合わせる
- 次の過剰装飾は原則禁止とする
  - 強い多層グラデーション
  - 長距離の浮遊アニメーション
  - 常時 `backdrop-filter` 依存のガラス表現
- 新規コンポーネントで独自フォントは追加しない

## 6. タイポグラフィ指針

- タイトルは必要以上に大きくしない
- 主情報は太字、補助情報は `colorNeutralForeground3` などで段階化する
- 長い文字列は省略表示とツールチップ等の補助設計を検討する

## 7. コンポーネント運用ルール

- 入力要素には必ずラベルまたは同等のアクセシブルネームを与える
- 破壊的操作（削除など）は誤操作対策を入れる
- ダイアログは「目的」「主要操作」「閉じる手段」を明示する
- エラー表示はユーザーが次に取る行動を判断できる文面にする

## 8. 状態設計の必須要件

以下の状態を必ず分離して扱うこと。

- `loading`: ローディング表示
- `error`: 失敗理由の表示
- `empty`: 対象データなしの表示
- `ready`: 通常表示

状態分岐は UI コンポーネント側で明確にし、曖昧な兼用表示を避ける。

## 9. アクセシビリティ要件

- キーボード操作のみで主要フロー（検索、起動、設定変更）を完了できる
- フォーカスが視認できることを CSS で妨げない
- 色だけで状態を伝えない（文言やアイコンを併用）
- エラー通知には `role="alert"` など適切な属性を使う

## 10. テーマ方針

- テーマは OS 設定（ライト/ダーク）に追従する
- 手動テーマ切替を導入する場合は、既存UI全体の整合性と検証計画を同時に提示する
- どちらのテーマでも境界線と文字コントラストを維持する

## 11. パフォーマンス要件

- 検索入力は再描画負荷を抑える（例: `useDeferredValue`）
- 大量リストは描画件数を制御する（仮想化または同等の最適化）
- 重い処理はレンダリング外へ分離する（フック化）

## 12. 文言ガイド（日本語 UI）

- ボタン文言は動詞で終える（例: `選択`, `追加`, `削除`, `起動`）
- プレースホルダーは補助情報であり、ラベルの代替にしない
- エラー文言には原因と対処のいずれかを含める
- 用語は統一する（`ゴースト`, `フォルダ`, `設定`）

## 13. PR レビューチェックリスト

- Fluent UI コンポーネントと `tokens` を優先している
- `loading` / `error` / `empty` / `ready` の状態表示がある
- Windows 11 らしい落ち着いた階層表現になっている
- キーボード操作とフォーカス可視性を損ねていない
- 文字切れやレイアウト崩れが狭幅でも発生しない
- 追加した文言が既存用語と整合している
- 一覧・検索の体感速度が悪化していない

## 14. 自動チェック

- ローカル実行: `npm run check:ui-guidelines`
- CI 実行: `.github/workflows/ci-build.yml` 内で同コマンドを実行

## 15. 手動回帰チェック（仮想リスト）

- 前提: 80件以上のゴーストが表示できる状態にする
- ケース1: 一覧を下までスクロールして `再読込` を実行し、先頭から正常表示されること
- ケース2: 一覧を下までスクロールして検索語を入力し、空白表示や表示不一致が出ないこと
- ケース3: 検索語を消した直後も、表示とスクロール位置の不整合がないこと
- 期待結果: `ghosts` 更新後、表示内容とスクロール位置が同期し、ユーザー操作なしで正常表示されること

## 16. 今後の推奨改善

- CI のチェック項目を増やし、静的チェックだけでなく UI テストも導入する
